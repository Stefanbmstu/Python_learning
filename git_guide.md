> Демонстрация для Windows 10, VS Code, GitLab

---

## Что такое Git?

Git — система контроля версий. Если просто: Git запоминает все изменения в коде, позволяет откатиться назад и работать нескольким людям над одним проектом, не мешая друг другу.

Создал его Линус Торвальдс в 2005 году для разработки ядра Linux. Сейчас это стандарт — почти все команды используют Git.

---

## 1. Настройка SSH и клонирование репозитория

Чтобы начать работу с проектом, нужно настроить безопасное подключение к GitLab и скачать репозиторий.

**Важно:** для доступа к git.tern.ru нужен корпоративный VPN.

Веб-интерфейс GitLab: https://git.tern.ru:5444/

### Зачем нужен SSH-ключ?

SSH-ключ — способ безопасной аутентификации без ввода пароля при каждом обращении к GitLab.

### Очистка старых ключей

**На GitLab:**  
Settings → SSH Keys → удаляем старые ключи

**Локально (PowerShell):**

```powershell
# Перейти в папку с ключами
cd ~/.ssh

# Посмотреть содержимое
ls

# Удалить старые ключи (если нужно)
rm id_rsa, id_rsa.pub
```

### Генерация нового SSH-ключа

```powershell
ssh-keygen -t ed25519 -C "your.email@company.com"

# Жмём Enter на все вопросы (или задаём passphrase)
```

### Добавление ключа в GitLab

```powershell
# Копируем публичный ключ в буфер обмена
Get-Content ~/.ssh/id_ed25519.pub | Set-Clipboard
```

В GitLab: Settings → SSH Keys → вставляем ключ → Add key

### Проверка подключения

```powershell
ssh -T git@git.tern.ru -p 822
```

Ожидаемый ответ: `Welcome to GitLab, @username!`

### Первоначальная настройка Git

```powershell
git config --global user.name "Stefan"
git config --global user.email "stefan.milevich@tern.ru"
```

### Клонирование репозитория

```powershell
cd C:\Projects
git clone ssh://git@git.tern.ru:822/tu/etl.git
cd etl
```

---

## 2. Операции с ветками

Ветка — это независимая линия разработки. Ветки позволяют работать над задачей изолированно, не мешая коллегам и не ломая основной код. Готовые изменения потом сливаются (merge) в общую ветку.

### Просмотр веток

```powershell
# Текущая ветка (отмечена *)
git branch

# Все ветки (локальные + удалённые)
git branch -a
```

### Создание ветки

```powershell
# Создать ветку
git branch ETL-123

# Создать и сразу переключиться
git checkout -b ETL-123
```

### Переключение между ветками

```powershell
git checkout ETL-123
```

**Важно:** перед переключением закоммитьте изменения или сделайте `git stash`.

### Удаление веток

```powershell
# Сначала переключиться на другую ветку
git checkout dev

# Удалить локальную ветку
git branch -d ETL-124

# Принудительное удаление (если есть несохранённые изменения)
git branch -D ETL-124

# Удалить ветку на сервере
git push origin --delete ETL-124
```

### Обновить список удалённых веток

```powershell
git fetch --prune
```

---

## 3. Работа с Git через PowerShell

Разобрались с ветками. Теперь — ежедневный цикл: как отслеживать изменения, фиксировать их и отправлять на сервер.

### Понимание состояния

```powershell
# Текущее состояние (ветка, изменения, staged-файлы)
git status

# История коммитов
git log --oneline

# Выход из просмотра: Q
```

### Получение изменений

```powershell
git pull
```

### Цикл внесения изменений

```powershell
# 1. Смотрим что изменилось
git status

# 2. Добавляем в stage
git add filename.txt      # один файл
git add .                 # все файлы

# 3. Коммитим
git commit -m "Описание изменений"

# 4. Отправляем на сервер
git push

# Если ветка новая:
git push -u origin ETL-124
```

### Отмена изменений

```powershell
# Отменить изменения в файле (до stage)
git checkout -- filename.txt

# Убрать файл из stage (после git add)
git reset filename.txt

# Отменить последний коммит (сохранить изменения)
git reset --soft HEAD~1

# Отменить коммит и изменения (осторожно!)
git reset --hard HEAD~1
```

### Полезные команды

```powershell
# Разница в файлах
git diff

# Временно сохранить изменения
git stash
git stash pop    # вернуть

# Подтянуть изменения из другой ветки
git merge dev
```

---

## 4. Работа с Git через VS Code

Все те же операции можно делать через графический интерфейс VS Code — без запоминания команд.

Открыть панель: **Ctrl+Shift+G** (иконка ветки слева)

### Основные действия

|Действие|Как сделать|
|---|---|
|Посмотреть изменения|Клик на файл в списке Changes|
|Stage|Кнопка **+** рядом с файлом|
|Unstage|Кнопка **−** рядом с файлом|
|Discard (отменить)|Стрелка ↩ рядом с файлом|
|Commit|Сообщение сверху → галочка ✓|
|Push|Меню **...** → Push|
|Pull|Меню **...** → Pull|
|Сменить ветку|Клик на имя ветки в левом нижнем углу|
|Создать ветку|Клик на ветку → Create new branch|

---

## 5. Git Flow и Merge Request

Команды и интерфейс освоили. Теперь — как мы работаем в команде: какие ветки создаём, как называем, в каком порядке сливаем.

### Структура веток

```
dev                       ← основная ветка разработки
 │
 └── ETL-123              ← ветка эпика (от dev)
      │
      ├── ETL-124         ← ветка задачи (от эпика)
      └── ETL-125         ← другая задача эпика
```

**Именование:** имя ветки = номер из Jira.

### Цикл работы над задачей

**1. Актуализировать dev:**

```powershell
git checkout dev
git pull
```

**2. Создать ветку эпика (если её нет):**

```powershell
git checkout -b ETL-123
git push -u origin ETL-123
```

**3. Создать ветку задачи от эпика:**

```powershell
git checkout ETL-123
git checkout -b ETL-124
git push -u origin ETL-124
```

**4. Работаем, делаем коммиты...**

**5. Перед завершением — актуализируем эпик:**

```powershell
git checkout ETL-123
git pull
git merge dev
git push
```

**6. Мержим эпик в ветку задачи:**

```powershell
git checkout ETL-124
git merge ETL-123
git push
```

**7. Создаём Merge Request в GitLab:**  
`ETL-124` → `ETL-123`
